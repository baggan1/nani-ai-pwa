<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>Nani-AI Wellness Assistant</title>

  <!-- PWA -->
  <link rel="manifest" href="/manifest.json" />
  <meta name="theme-color" content="#14A1A1" />
  <link rel="icon" href="/icons/icon-192.png" />

  <!-- Styles -->
  <link rel="stylesheet" href="/src/ui.css" />
</head>

<body>

  <!-- ğŸŒ¿ AUTH / WELCOME SCREEN -->
  <div id="auth-screen" class="welcome-screen">
    <img src="/icons/nani-avatar.png" class="welcome-avatar" />

    <h1 class="welcome-title">Welcome to Nani-AI</h1>
    <p class="welcome-subtitle">
      Your natural wellness guide. Enjoy a 7-day free trial â€” no password to remember.
    </p>

    <input id="auth-email" type="email" placeholder="Continue with email (magic link)" />
    <button id="email-login-btn">Send Magic Link</button>

    <div style="margin: 8px 0; font-size: 0.9rem; color: #666;">or</div>

    <button id="google-login-btn" style="width:100%; padding:12px; border-radius:8px; border:none; background:#ffffff; border:1px solid #ccc; display:flex; align-items:center; justify-content:center; gap:8px; cursor:pointer;">
      <span>ğŸ” Continue with Google</span>
    </button>

    <p id="auth-message" class="error-msg" style="display:none;"></p>
  </div>

  <!-- ğŸŒ¿ MAIN CHAT APP (Shown when authenticated) -->
  <div id="chat-app" style="display:none;">

    <!-- Header -->
    <div class="header">
      <div class="avatar-container">
        <img src="/icons/nani-avatar.png" class="avatar-img" />
      </div>

      <div class="header-text">
        <div class="title">Nani-AI</div>
        <div class="subtitle">Your Natural Wellness Guide</div>
      </div>

      <button id="account-btn" class="account-btn">Account</button>
    </div>

    <!-- Chat Container -->
    <div class="container">
      <div id="nani-chat-box"></div>

      <div class="input-row">
        <input id="nani-input" placeholder="What are you suffering from?" />
        <button id="nani-send-btn">Send</button>
      </div>

      <div id="nani-loader" class="loader">ğŸŒ± Preparing Naniâ€™s wisdom...</div>
    </div>
  </div>

  <!-- ğŸŒ¿ ACCOUNT PANEL MODAL -->
  <div id="account-panel" class="account-panel hidden">
    <div class="panel-content">
      <h2>Your Account</h2>

      <p><strong>Email:</strong> <span id="acc-email">â€”</span></p>
      <p><strong>Trial Status:</strong> <span id="acc-trial-status">â€”</span></p>
      <p><strong>Days Left:</strong> <span id="acc-days-left">â€”</span></p>
      <p><strong>Subscription:</strong> <span id="acc-sub-status">â€”</span></p>

      <button id="acc-subscribe-btn" class="subscribe-btn hidden">Subscribe</button>
      <button id="acc-close" class="close-btn">Close</button>
    </div>
  </div>

  <!-- Supabase + App Script -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script type="module" src="/src/app.js"></script>
</body>
</html>
